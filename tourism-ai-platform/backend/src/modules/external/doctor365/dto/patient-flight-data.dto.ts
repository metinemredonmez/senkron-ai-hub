import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';
import { IsDateString, IsObject, IsOptional, IsString, Length } from 'class-validator';

export class PatientFlightDataDto {
  @ApiProperty({
    description: 'Doktor365 patient identifier that will receive travel data',
    example: 'd365_pat_123456',
  })
  @IsString()
  @Length(3, 120)
  doktor365PatientId!: string;

  @ApiProperty({
    description: 'External booking identifier generated by Synchron AI Hub',
    example: 'case-42-flight-1',
  })
  @IsString()
  @Length(3, 120)
  itineraryId!: string;

  @ApiProperty({
    description: 'Flight number communicated to Doktor365',
    example: 'TK123',
  })
  @IsString()
  @Length(2, 20)
  flightNumber!: string;

  @ApiProperty({
    description: 'Scheduled departure time (ISO 8601)',
    example: '2024-05-01T08:30:00.000Z',
  })
  @IsDateString()
  departureAt!: string;

  @ApiPropertyOptional({
    description: 'Scheduled arrival time (ISO 8601)',
    example: '2024-05-01T12:45:00.000Z',
  })
  @IsOptional()
  @IsDateString()
  arrivalAt?: string;

  @ApiPropertyOptional({
    description: 'Additional metadata shared with Doktor365',
    example: { airline: 'Turkish Airlines', seatClass: 'business' },
  })
  @IsOptional()
  @IsObject()
  metadata?: Record<string, unknown>;
}
